<div class="container mt-5 padding-side">
    <!-- Page Title -->
    <h4 class="fw-bold">Make Online Payment</h4>
    <p class=" mb-4">Select medium of payment to proceed.</p>

    <!-- Tabs Section -->
    <ul class="nav nav-pills mb-3 d-flex w-100" role="tablist">
        <li class="nav-item flex-grow-1" *ngFor="let option of paymentOptions">
            <button class="nav-link text-left w-100 d-flex align-items-center"
                [class.active]="selectedTab === option.id" (click)="selectTab(option.id)">
                <img [src]="option.icon" alt="{{ option.label }} icon" class="me-2" width="20" height="20" />
                <span>{{ option.label }}</span>
            </button>
        </li>
    </ul>


    <!-- Payment Summary -->
    <div class="alert alert-light text-center background-color shadow-sm mb-4 ">
        <p class="mb-0 fw-bold text-muted">FINAL PREMIUM (INCLUDING GST)</p>
        <h2 class="fw-bold">₹ 19,50,001</h2>
    </div>

    <!-- Dynamic Content Based on Tab Selection -->
    <div *ngIf="selectedTab === 'upi'" class="d-flex flex-column pt-5 pb-5">
        <!-- UPI Content -->
        <h5 class="fw-bold">Scan QR and Pay</h5>
        <p class="text-muted">
            Scan the QR using any UPI app on your mobile phone like PhonePe, Paytm, GooglePay, BHIM, etc.
        </p>
        <div *ngIf="!qrcode">
            <div class="mt-4">
                <button class=" floatright btn btn-dark mb-3" (click)="generateqrcode()">Generate QR Code</button>
            </div>
            <div>
                <p class=" mt-4 text-center text-muted">or</p>
            </div>
            <div>
                <h5 class="fw-bold">Enter your UPI ID and Pay</h5>
                <p class="text-muted">
                    Enter your UPI ID to continue paying via UPI apps.
                </p>
                <div class="mb-3">
                    <label for="upiId" class="form-label">UPI ID</label>
                    <input type="text" class="form-control" placeholder="e.g., 9221664567@xyz" [(ngModel)]="upiId" />
                </div>
                <button class="btn btn-secondary floatright" [disabled]="!upiId">Verify and Pay</button>
            </div>
        </div>
        <div *ngIf="qrcode">
            <div>
                <img src="/icons/qrcode.svg" alt="qrcode" class="me-2 w-5 h-5" />
            </div>
        </div>

    </div>

    <div *ngIf="selectedTab === 'credit'" class="pt-5 pb-5">
        <!-- Credit/Debit Card Content -->
        <div class=" d-flex justify-content-between">
            <h5 class="fw-bold">Enter bank detail and pay.</h5>
            <ul class="d-flex no-bullets floatright">
                <li class="li" *ngFor="let option of imagelist">
                    <img [src]="option.image" alt="{{ option.label }} icon" class="me-2" width="25" height="20" />
                </li>
            </ul>
        </div>
        <p>Don’t worry! your bank details will be kept confidential.</p>

        <app-dynamic-form [config]="cardconfig" [formGroup]="cardformGroup"></app-dynamic-form>
        <div class="floatright pb-5 ">
            <button class="btn btn-secondary me-4">Cancel</button>
            <button class="btn btn-primary">Make Payment</button>
        </div>

    </div>

    <div *ngIf="selectedTab === 'netbanking'">
        <!-- Net Banking Content -->
        <h5 class="fw-bold">Net Banking</h5>
        <p>
            Select your bank to continue.
        </p>
        <div class="d-flex gap-4">
            <div class="flex-grow-1 rounded-3" *ngFor="let option of netbankinglist">
                <div class="card p-4 d-flex justify-content-center align-items-center"
                    [class.selected]="selectednetbankingOption === option.id">
                    <img [src]="option.image" [alt]="option.label" class="img-fluid" />
                </div>
            </div>
        </div>



        <div class="container mt-5">
            <div class="form-group position-relative">
                <label for="searchDropdown" class="form-label">Select Bank</label>

                <!-- Searchable Input -->
                <input type="text" class="form-control" id="searchDropdown" placeholder="Search Bank"
                    [(ngModel)]="searchTerm" (input)="filterList()" />

                <!-- Dropdown Options -->
                <ul class="list-group position-absolute w-100" *ngIf="filteredList.length && showDropdown">
                    <li class="list-group-item list-group-item-action" *ngFor="let bank of filteredList"
                        (click)="selectBank(bank)">
                        <img [src]="bank.image" alt="{{ bank.label }}" width="30" class="me-2" />
                        {{ bank.label }}
                    </li>
                </ul>
            </div>

            <p class="mt-3">Selected Bank: {{ selectedBank?.label || 'None' }}</p>
        </div>

        <button class="btn btn-secondary mt-3">Proceed to Pay</button>
    </div>

    <div *ngIf="selectedTab === 'emi'">
        <!-- EMI Content -->
        <div class="emi-container">
            <h5 class="fw-bold">EMI's</h5>
            <p class="text-muted">Select your bank to continue.</p>
            <div class="radio-group">
                <label>

                    <input type="radio" name="paymentMethod" [(ngModel)]="selectedPaymentMethod" value="debit" />
                    <span>Debit Card</span>
                </label>
                <label>
                    <input type="radio" name="paymentMethod" [(ngModel)]="selectedPaymentMethod" value="credit" />
                    <span>Credit Card</span>
                </label>
                <label>
                    <input type="radio" name="paymentMethod" [(ngModel)]="selectedPaymentMethod" value="cardless" />
                    <span>Cardless EMI</span>
                </label>
            </div>
            <div class="d-flex gap-4">
                <div class="flex-grow-1 rounded-3" *ngFor="let option of netbankinglist">
                    <div class="card p-4 d-flex justify-content-center align-items-center"
                        [class.selected]="selectednetbankingOption === option.id">
                        <img [src]="option.image" [alt]="option.label" class="bank-img" />
                    </div>
                </div>
            </div>
            <div class="dropdown-container">
                <div class="custom-dropdown">
                  <img src="icons/search.svg" alt="Search" class="search-icon" />
                  <select [(ngModel)]="searchTerm">
                    <option *ngFor="let bank of filteredList">{{ bank.label }}</option>
                  </select>
                  <img src="icons/chevron-down.svg" alt="Dropdown" class="dropdown-icon" />
                </div>
              </div>
                <div class="actions">
                    <button class="cancel-btn">Cancel</button>
                    <button class="pay-btn" [disabled]="!selectedBank">Make Payment</button>
                  </div>
                </div>
        </div>
    </div>

    <div *ngIf="selectedTab === 'wallet'">
        <!-- Wallet Payment -->
        <h5 class="fw-bold">Wallet</h5>
        <p class="text-muted">Note: As per government regulation, wallets can't be used for more than Rs.1,00,000/- per month.
        </p>
        <div class="row">
            <div class="col-md-4 mb-4" *ngFor="let wallet of wallets">
              <div class="card text-center p-3 shadow-sm wallet-card">
                <img [src]="wallet.image" [alt]="wallet.label" class="card-img-top wallet-logo mx-auto" />
                <div class="card-body">
                  <p class="card-title m-0">{{ wallet.label }}</p>
                </div>
              </div>
            </div>
          </div>
        <button class="btn btn-secondary">Pay via Wallet</button>
    </div>
